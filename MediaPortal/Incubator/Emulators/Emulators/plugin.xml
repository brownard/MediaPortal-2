<Plugin
    DescriptorVersion="1.0" 
    Name="Emulators"
    PluginId="{FFAC513C-40B3-4FB0-8CBC-1683B4B7395C}"
    Author="Brownard"
    Copyright="GPL"
    Description="Frontend for the emulators plugin.">
  
  <Version
        PluginVersion="1.0"
        ReleaseDate="2015-07-22 01:00:00 GMT+01:00"
        CurrentAPI="1"/>
  
  <Runtime>
    <Assembly FileName="Emulators.dll"/>
    <Assembly FileName="Emulators.Common.dll"/>
    <PluginStateTracker ClassName="Emulators.EmulatorsPlugin"/>
  </Runtime>

  <DependsOn>
    <CoreDependency Name="MediaPortal.Common" CompatibleAPI="1" />
    <CoreDependency Name="MediaPortal.UI" CompatibleAPI="1" />
    <PluginReference PluginId="{5D239050-02B8-4f58-8301-7630A1C4CF85}" CompatibleAPI="1"/>    <!-- SkinBase -->
    <PluginReference PluginId="{D87D92F0-5E71-470a-A2A4-430F90A28BF3}" CompatibleAPI="1"/>    <!-- SkinEngine -->
    <PluginReference PluginId="{15FB35F7-8C85-4404-BC67-BFF28446158A}" CompatibleAPI="1" />   <!-- Media -->
    <PluginReference PluginId="{15FD97A4-D925-4D8A-9DF0-5349743EED0C}" CompatibleAPI="1" />   <!-- Fanart Client -->
    <PluginReference PluginId="{1AFF4467-64B0-4ca1-AF28-9AEDF3525BCE}" CompatibleAPI="1" />   <!-- ConfigurationManager -->
    <PluginReference PluginId="{B765A4B6-F455-4941-BDAE-2CE45208BFEB}" CompatibleAPI="1" />   <!-- Configuration plugin -->
  </DependsOn>

  <Register Location="/Models">
    <Model Id="6C96C335-7A79-45DA-90B7-541B3C7235EF" Name="EmulatorConfigurationModel" ClassName="Emulators.Models.EmulatorConfigurationModel"/>
    <Model Id="E5D445E1-1F1E-4604-90CC-A63B098A5FFE" Name="GoodMergeSelectModel" ClassName="Emulators.Models.GoodMergeSelectModel"/>
    <Model Id="3ECB5E18-5B24-411D-9F06-533249BA6F00" Name="AddEmulatorAction" ClassName="Emulators.Actions.AddEmulatorAction"/>
    <Model Id="495F94B5-9E13-4548-BAAA-6DB424B58267" Name="RemoveEmulatorAction" ClassName="Emulators.Actions.RemoveEmulatorAction"/>
    <Model Id="940A868F-8360-42DA-B652-F3924B747CB5" Name="ClearGoodMergeCacheModel" ClassName="Emulators.Models.ClearGoodMergeCacheModel"/>
  </Register>

  <Register Location="/Services">
    <Service Id="IMediaCategoryHelper" RegistrationClassName="Emulators.Common.IMediaCategoryHelper"
        ServiceClassName="Emulators.MediaCategoryHelper"/>
    <Service Id="IGameLauncher" RegistrationClassName="Emulators.Game.IGameLauncher"
        ServiceClassName="Emulators.Game.GameLauncher"/>
    <Service Id="IEmulatorManager" RegistrationClassName="Emulators.Emulator.IEmulatorManager"
        ServiceClassName="Emulators.Emulator.EmulatorConfigurationManager"/>
    <Service Id="GamesDbMatcher" RegistrationClassName="Emulators.Common.Matchers.GameMatcher"
        ServiceClassName="Emulators.Common.Matchers.GameMatcher"/>
  </Register>

  <Register Location="/Media/Extensions">
    <MediaItemActionBuilder Id="F6B516D8-E342-423D-ABE4-91ECD2E59446" Caption="[Emulators.SelectGoodmerge.Header]" Sort="A.01" ClassName="Emulators.MediaExtensions.MediaItemActions.SelectGoodMergeAction"/>
  </Register>

  <Register Location="/Media/MetadataExtractors">
    <Instance
        Id="GamesMetadataExtractor"
        ClassName="Emulators.Common.GameMetadataExtractor"/>
    <Instance
        Id="GoodMergeMetadataExtractor"
        ClassName="Emulators.Common.GoodMergeMetadataExtractor"/>
  </Register>

  <Register Location="/Workflow/States">

    <WorkflowState Id="DFC41902-DE22-4AEF-B9D2-C369BD79C4E0"
      Name="GamesNavigation-Root"
      DisplayLabel="[Emulators.GamesRootViewName]"
      WorkflowModel="4CDD601F-E280-43b9-AD0A-6D7B2403C856"/>   <!-- Workflow model = Media model -->
    
    <!-- Overview screen for all configured emulators -->
    <WorkflowState Id="903DD5EB-56B2-42B5-B1D8-64106651296A"
        Name="EmulatorConfigurationOverview"
        DisplayLabel="[Emulators.Config.EmulatorConfigurations.Title]"
        MainScreen="emulator_config"
        WorkflowModel="6C96C335-7A79-45DA-90B7-541B3C7235EF"/>    <!-- Emulator config model -->

    <!-- Remove configured emulators -->
    <WorkflowState Id="A07A0648-878E-4762-9540-3939E308DD94"
        Name="RemoveEmulatorConfiguration"
        DisplayLabel="[Emulators.Config.RemoveEmulatorConfiguration.Title]"
        MainScreen="emulator_config_remove"
        WorkflowModel="6C96C335-7A79-45DA-90B7-541B3C7235EF"/>    <!-- Emulator config model -->
    
    <!-- Choose emulator type -->
    <WorkflowState Id="CFD8DD6F-6C80-49E1-9F79-A87AE259828D"
        Name="ChooseEmulatorType"
        DisplayLabel="[Emulators.Config.ChooseEmulatorType.Title]"
        MainScreen="emulator_config_choose_type"
        WorkflowModel="6C96C335-7A79-45DA-90B7-541B3C7235EF"/>    <!-- Emulator config model -->
    
    <!-- Choose emulator path -->
    <WorkflowState Id="B3B74541-3779-46EB-8EED-DF00CBEEC91A"
        Name="ChooseEmulatorPath"
        DisplayLabel="[Emulators.Config.ChooseEmulatorPath.Title]"
        MainScreen="emulator_config_choose_path"
        WorkflowModel="6C96C335-7A79-45DA-90B7-541B3C7235EF"/>    <!-- Emulator config model -->

    <!-- Edit emulator name -->
    <WorkflowState Id="A533006C-D895-41AE-86A3-DF9193707120"
        Name="EditEmulatorName"
        DisplayLabel="[Emulators.Config.EditEmulatorName.Title]"
        MainScreen="emulator_config_edit_name"
        WorkflowModel="6C96C335-7A79-45DA-90B7-541B3C7235EF"/>    <!-- Emulator config model -->

    <!-- Choose emulator categories -->
    <WorkflowState Id="E30DCBAE-BB1D-4701-84B0-FA3624481648"
        Name="ChooseCategoriesName"
        DisplayLabel="[Emulators.Config.ChooseEmulatorCategory.Title]"
        MainScreen="emulator_config_choose_categories"
        WorkflowModel="6C96C335-7A79-45DA-90B7-541B3C7235EF"/>    <!-- Emulator config model -->
    
    <!-- Edit emulator file extensions -->
    <WorkflowState Id="3017CAD9-3EFD-48F4-BC8D-06295389D21D"
        Name="EditFileExtensions"
        DisplayLabel="[Emulators.Config.ChooseFileExtensions.Title]"
        MainScreen="emulator_config_edit_extensions"
        WorkflowModel="6C96C335-7A79-45DA-90B7-541B3C7235EF"/>    <!-- Emulator config model -->

    <!-- Edit emulator arguments -->
    <WorkflowState Id="B2D4E8EC-0AE3-4C77-9E45-5EDC71EF4032"
        Name="EditArguments"
        DisplayLabel="[Emulators.Config.EditArguments.Title]"
        MainScreen="emulator_config_arguments"
        WorkflowModel="6C96C335-7A79-45DA-90B7-541B3C7235EF"/>    <!-- Emulator config model -->

    <!-- Dialog States -->

    <!-- Clear GoodMerge cache dialog -->
    <DialogState Id="65CA11E1-C408-453D-B751-FF6598020612"
        Name="ClearGoodMergeCache"
        DisplayLabel="[Emulators.Config.Setting.ClearGoodMergeCache]"
        DialogScreen="dialog_clear_goodmerge_cache"
        WorkflowModel="940A868F-8360-42DA-B652-F3924B747CB5"/>    <!-- Clear GoodMerge cache model -->
  
  </Register>

  <!-- Language resources -->
  <Register Location="/Resources/Language">
    <Resource Id="EmulatorsLanguage" Directory="Language" Type="Language"/>
  </Register>

  <Register Location="/Resources/Skin">
    <Resource Id="EmulatorsSkin" Directory="Skin" Type="Skin"/>
  </Register>

  <!--<Register Location="/Fanart/FanartImageSourceProviders">
    <FanartImageSourceProviderBuilder Id="{E89579C8-AADE-4788-8E33-ECE5115A4FD6}" ClassName="Emulators.Fanart.FanartImageSourceProvider"/>
  </Register>-->

  <!-- Root Sections -->
  <Register Location="/Configuration/Settings">
    <ConfigSection
        Id="Plugins"
        Redundant="true"
        Text="[Settings.Plugins]"/>
  </Register>

  <Register Location="/Configuration/Settings/Plugins">
    <ConfigSection
        Id="Emulators"
        Redundant="true"
        Text="[Emulators.Config.PluginSettingsLabel]"/>
  </Register>

  <Register Location="/Configuration/Settings/Plugins/Emulators">
    <ConfigSection
        Id="Advanced"
        Redundant="true"
        Text="[Emulators.Config.Setting.Advanced]"/>
    
    <CustomConfigSetting
        Id="EmulatorsConfiguration"
        Text="[Emulators.Config.Setting.ConfigureEmulators]"
        HelpText="[Emulators.Config.Setting.ConfigureEmulators.Help]"
        ClassName="Emulators.Settings.Configuration.EmulatorsConfigSetting"
        AdditionalData="WorkflowState=903DD5EB-56B2-42B5-B1D8-64106651296A,ConfAppPanel=..."/>

    <!--<ConfigSetting
        Id="MinimiseOnStart"
        Text="[Emulators.Config.Setting.MinimiseOnStart]"
        HelpText="[Emulators.Config.Setting.MinimiseOnStart.Help]"
        ClassName="Emulators.Settings.Configuration.MinimiseOnStart"/>-->
    
  </Register>

  <Register Location="/Configuration/Settings/Plugins/Emulators/Advanced">
    <CustomConfigSetting
        Id="ClearGoodMergeCache"
        Text="[Emulators.Config.Setting.ClearGoodMergeCache]"
        HelpText="[Emulators.Config.Setting.ClearGoodMergeCache.Help]"
        ClassName="Emulators.Settings.Configuration.ClearGoodMergeCache"
        AdditionalData="WorkflowState=65CA11E1-C408-453D-B751-FF6598020612,ConfAppPanel=..."/>    
  </Register>
  
</Plugin>
